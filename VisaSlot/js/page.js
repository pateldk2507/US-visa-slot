(()=>{let e=XMLHttpRequest.prototype;let s=e.open,t=e.send,i=e.setRequestHeader;e.open=function(e,t){this._method=e;this._url=t;this._requestHeaders={};this._startTime=(new Date).toISOString();return s.apply(this,arguments)};e.setRequestHeader=function(e,t){this._requestHeaders[e]=t;return i.apply(this,arguments)};function n(e){const i={};const t=e.slice(e.indexOf("?")+1).split("&");t.forEach(e=>{const[t,s]=e.split("=");i[decodeURIComponent(t)]=decodeURIComponent(s)});return i}function r(i){i.addEventListener("load",function(){let e=i.responseText.trim(),t=i._url.match(/query-family-members/gi)?"vD":"vSC";if(t==="vSC"){if(i._url.includes("schedule-days")){t="vSD"}else if(i._url.includes("schedule-entries")){t="vST"}}if(e){const s=new CustomEvent("vSCP",{detail:{data:JSON.parse(e),resource:t}});dispatchEvent(s)}})}let o={cacheString:"0",route:""};e.send=function(e){if(this._url.match(/schedule-group\/(get-family-(ofc|consular)-schedule|query-family-members)/gi)){let e=n(this._url);if(e.route!==o.route){r(this)}else if(e.cacheString-o.cacheString>=200){r(this)}o=e}return t.apply(this,arguments)}})();addEventListener("fromContent",e=>{let t=e.detail;if(t.type==="selectSlotDate"){const s=document.querySelector("#datepicker");$(s).datepicker("setDate",t.slotDate);$(s).datepicker("option","onSelect").call(s,t.slotDate)}else if(t.type==="selectLocation"){const s=document.querySelector("#post_select");$(s).val(t.location);$(s).trigger("change")}});